generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model carriers {
  id                   Int       @id @default(autoincrement())
  name                 String    @unique @db.VarChar(255)
  rate_title           String    @db.VarChar(255)
  delivery_description String    @db.VarChar(255)
  active               Boolean?  @default(true)
  created_at           DateTime? @default(now()) @db.Timestamp(6)
  updated_at           DateTime? @default(now()) @db.Timestamp(6)
}

model generated_rates {
  id                   Int       @id @default(autoincrement())
  zone_id              String    @db.VarChar(255)
  zone_name            String    @db.VarChar(255)
  weight_min           Decimal   @db.Decimal(5, 2)
  weight_max           Decimal   @db.Decimal(5, 2)
  calculated_price     Decimal   @db.Decimal(10, 2)
  rate_title           String    @db.VarChar(255)
  delivery_description String    @db.VarChar(255)
  generated_at         DateTime? @default(now()) @db.Timestamp(6)

  @@index([weight_min, weight_max], map: "idx_generated_rates_weight_range")
  @@index([zone_id], map: "idx_generated_rates_zone_id")
  @@index([zone_name], map: "idx_generated_rates_zone_name")
}

model zone_tariffs {
  id            Int       @id @default(autoincrement())
  zone_id       String    @db.VarChar(255)
  zone_name     String    @db.VarChar(255)
  weight_kg     Decimal   @db.Decimal(5, 2)
  tariff_amount Decimal   @db.Decimal(10, 2)
  created_at    DateTime? @default(now()) @db.Timestamp(6)

  @@index([weight_kg], map: "idx_zone_tariffs_weight")
  @@index([zone_id], map: "idx_zone_tariffs_zone_id")
  @@index([zone_name], map: "idx_zone_tariffs_zone_name")
}

enum RateType {
  FIXED
  PRICE_BASED
  WEIGHT_BASED
  CALCULATED
}
